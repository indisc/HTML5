/*!
jCanvas v5.3
Copyright 2012, Caleb Evans
Licensed under the MIT license
*/
(function(A,J,c,v,O,u,o,x,S,y,B){var C,U,I=A.extend,Q=v.round,d=v.PI,p=v.sin,b=v.cos,k=A.event.fix,t={},n={},L="transparent",F,G;function H(){}function R(V){if(V){I(U,V)}else{U=H.prototype=I({},C)}return this}A.fn.jCanvas=R;R.version="5.3";R.events={};C={angle:0,align:"center",autosave:x,baseline:"middle",ccw:S,closed:S,compositing:"source-over",cornerRadius:0,cropFromCenter:x,each:y,end:360,fillStyle:L,font:"12pt sans-serif",fromCenter:x,height:y,inDegrees:x,load:y,mask:S,miterLimit:10,opacity:1,projection:0,r1:y,r2:y,radius:0,repeat:"repeat",rounded:S,scale:1,scaleX:1,scaleY:1,shadowBlur:0,shadowColor:L,shadowX:0,shadowY:0,sHeight:y,sides:3,source:"",start:0,strokeCap:"butt",strokeJoin:"miter",strokeStyle:L,strokeWidth:1,sWidth:y,sx:y,sy:y,text:"",visible:x,width:y,x:0,x1:0,y:0,y1:0,};R();function M(V,W){V.fillStyle=W.fillStyle;V.strokeStyle=W.strokeStyle;V.lineWidth=W.strokeWidth;if(W.rounded){V.lineCap="round";V.lineJoin="round"}else{V.lineCap=W.strokeCap;V.lineJoin=W.strokeJoin;V.miterLimit=W.miterLimit}V.shadowOffsetX=W.shadowX;V.shadowOffsetY=W.shadowY;V.shadowBlur=W.shadowBlur;V.shadowColor=W.shadowColor;V.globalAlpha=W.opacity;V.globalCompositeOperation=W.compositing}t.x=[];t.y=[];function E(V){R.events[V]=function W(X){X.bind(V+".jCanvas",function(Y){t.x[0]=Y.offsetX;t.y[0]=Y.offsetY;t.type=Y.type;X.drawLayers()});W.called=x}}E("click");E("dblclick");E("mousedown");E("mouseup");E("mousemove");R.events.mouseover=R.events.mouseout=function z(V){V.bind("mousemove.jCanvas",function(W){t.x[1]=t.x[0];t.y[1]=t.y[0];t.x[0]=W.offsetX;t.y[0]=W.offsetY;t.type="hover";V.drawLayers()});z.called=x};function e(V){V.mouseX=t.x[0];V.mouseY=t.y[0];t.x=[];t.y=[]}function P(Z,V,X){var Y=t.type,ab=X[Y],aa=V.isPointInPath(t.x[0],t.y[0]),W=V.isPointInPath(t.x[1],t.y[1]);if(Y==="hover"){if(aa&&!W&&!X.fired){X.fired=x;e(X);if(X.mouseover){X.mouseover.call(Z,X);M(V,X)}}else{if(!aa&&W&&X.fired){X.fired=S;e(X);if(X.mouseout){X.mouseout.call(Z,X);M(V,X)}}}}else{if(Y!=="hover"&&ab&&aa){e(X);ab.call(Z,X);M(V,X)}}}function j(V){return(V&&V.getContext?V.getContext("2d"):y)}function q(V,W){if(W.mask){if(W.autosave){V.save()}V.clip()}if(W.closed){V.closePath();V.fill();V.stroke()}else{V.fill();V.stroke();V.closePath()}}function w(V,W){if(W.scale!==1){W.scaleX=W.scaleY=W.scale}if(W.scaleX!==1||W.scaleY!==1){V.translate(W.x,W.y);V.scale(W.scaleX,W.scaleY);V.translate(-W.x,-W.y)}}function r(V,W){W.toRad=(W.inDegrees?d/180:1);V.translate(W.x,W.y);V.rotate(W.angle*W.toRad);V.translate(-W.x,-W.y)}function g(W,Y,X,V){Y.toRad=(Y.inDegrees?d/180:1);W.save();if(!Y.fromCenter){Y.x+=X/2;Y.y+=V/2}if(Y.angle){r(W,Y)}w(W,Y)}function m(V){V=V||{};C=I(C,V.props);R();if(V.name){A.fn[V.name]=function(X){var ab=this,Y,Z,W,aa=I(new H(),X);for(Z=0;Z<ab.length;Z+=1){Y=ab[Z];W=j(Y);if(W){M(W,aa);V.fn.call(Y,W,aa)}}return ab}}return A.fn[V.name]}A.fn.loadCanvas=function(){return j(this[0])};A.fn.getCanvasImage=function(V,X){var W=this[0];if(!V){V="png"}V=V.replace(/^(\w+)$/gi,"image/$1").replace(/jpg/gi,"jpeg");return(W&&W.toDataURL)?W.toDataURL(V,X):y};A.fn.draw=function(Y){var X=this,W,V;for(W=0;W<X.length;W+=1){V=j(X[W]);if(V){Y.call(X[W],V)}}return X};A.fn.gradient=function(ad){var V=this,ah,aa=I(new H(),ad),af,ag=[],ac,X,Z,ab,ae,Y,W;ah=j(V[0]);if(ah){if(!aa.c2){af=aa.c1}else{if(aa.r1!==y||aa.r2!==y){af=ah.createRadialGradient(aa.x1,aa.y1,aa.r1,aa.x2,aa.y2,aa.r2)}else{af=ah.createLinearGradient(aa.x1,aa.y1,aa.x2,aa.y2)}for(ab=1;aa["c"+ab]!==B;ab+=1){if(aa["s"+ab]!==B){ag.push(aa["s"+ab])}else{ag.push(y)}}ac=ag.length;if(ag[0]===y){ag[0]=0}if(ag[ac-1]===y){ag[ac-1]=1}for(ab=0;ab<ac;ab+=1){if(ag[ab]!==y&&ag[ab]!==1){Y=1;W=0;X=ag[ab];for(ae=(ab+1);ae<ac;ae+=1){if(ag[ae]!==y){Z=ag[ae];break}else{Y+=1}}if(X>Z){ag[ae]=ag[ab]}}else{if(ag[ab]===y){W+=1;ag[ab]=X+(W*((Z-X)/Y))}}af.addColorStop(ag[ab],aa["c"+(ab+1)])}}}else{af=y}return af};A.fn.pattern=function(ab){var V=this,ad,X=I(new H(),ab),Y,aa,ac;function Z(){aa=ad.createPattern(Y,X.repeat)}function W(){Z();if(X.load){X.load.call(V[0],aa)}}ad=j(V[0]);if(ad){Y=new O();if(typeof X.source==="function"){Y=c.createElement("canvas");Y.width=X.width;Y.height=X.height;ac=j(Y);X.source.call(Y,ac);W()}else{ac=X.source.getContext;if(X.source.src||ac){Y=X.source}else{Y.src=X.source}if(Y.complete||ac){W()}else{Y.onload=W}}}else{aa=y}return aa};A.fn.clearCanvas=function(W){var Z=this,X,V,Y=I(new H(),W);for(X=0;X<Z.length;X+=1){V=j(Z[X]);if(V){if(!X){g(V,Y,Y.width,Y.height)}if(!Y.width&&!Y.height){V.clearRect(0,0,Z[X].width,Z[X].height)}else{V.clearRect(Y.x-Y.width/2,Y.y-Y.height/2,Y.width,Y.height)}}}return Z};A.fn.saveCanvas=function(){var X=this,W,V;for(W=0;W<X.length;W+=1){V=j(X[W]);if(V){V.save()}}return X};A.fn.restoreCanvas=function(){var X=this,W,V;for(W=0;W<X.length;W+=1){V=j(X[W]);if(V){V.restore()}}return X};A.fn.scaleCanvas=function(W){var Z=this,X,V,Y=I(new H(),W);for(X=0;X<Z.length;X+=1){V=j(Z[X]);if(V){if(Y.autosave){V.save()}w(V,Y)}}return Z};A.fn.translateCanvas=function(W){var Z=this,X,V,Y=I(new H(),W);for(X=0;X<Z.length;X+=1){V=j(Z[X]);if(V){if(Y.autosave){V.save()}V.translate(Y.x,Y.y)}}return Z};A.fn.rotateCanvas=function(W){var Z=this,X,V,Y=I(new H(),W);for(X=0;X<Z.length;X+=1){V=j(Z[X]);if(V){if(Y.autosave){V.save()}r(V,Y)}}return Z};A.fn.drawRect=function i(ab){var W=this,aa,ae,Z=I(new H(),ab),Y,ad,X,ac,V;for(aa=0;aa<W.length;aa+=1){ae=j(W[aa]);if(ae){if(Z.layer&&!Z._layer){s(W[aa],ab,i)}M(ae,Z);if(!aa){g(ae,Z,Z.width,Z.height)}ae.beginPath();if(Z.cornerRadius){Z.closed=x;Y=Z.x-Z.width/2;ad=Z.y-Z.height/2;X=Z.x+Z.width/2;ac=Z.y+Z.height/2;V=Z.cornerRadius;if((X-Y)-(2*V)<0){V=(X-Y)/2}if((ac-ad)-(2*V)<0){V=(ac-ad)/2}ae.moveTo(Y+V,ad);ae.lineTo(X-V,ad);ae.arc(X-V,ad+V,V,3*d/2,d*2,S);ae.lineTo(X,ac-V);ae.arc(X-V,ac-V,V,0,d/2,S);ae.lineTo(Y+V,ac);ae.arc(Y+V,ac-V,V,d/2,d,S);ae.lineTo(Y,ad+V);ae.arc(Y+V,ad+V,V,d,3*d/2,S)}else{ae.rect(Z.x-Z.width/2,Z.y-Z.height/2,Z.width,Z.height)}ae.restore();if(Z._event){P(W[aa],ae,ab)}q(ae,Z)}}return W};A.fn.drawArc=function i(W){var Z=this,X,V,Y=I(new H(),W);if(!Y.inDegrees&&Y.end===360){Y.end=d*2}for(X=0;X<Z.length;X+=1){V=j(Z[X]);if(V){if(Y.layer&&!Y._layer){s(Z[X],W,i)}M(V,Y);if(!X){g(V,Y,Y.radius*2,Y.radius*2)}V.beginPath();V.arc(Y.x,Y.y,Y.radius,(Y.start*Y.toRad)-(d/2),(Y.end*Y.toRad)-(d/2),Y.ccw);V.restore();if(Y._event){P(Z[X],V,W)}q(V,Y)}}return Z};A.fn.drawEllipse=function i(W){var aa=this,Y,V,Z=I(new H(),W),X=Z.width*4/3;for(Y=0;Y<aa.length;Y+=1){V=j(aa[Y]);if(V){if(Z.layer&&!Z._layer){s(aa[Y],W,i)}M(V,Z);if(!Y){g(V,Z,Z.width,Z.height)}V.beginPath();V.moveTo(Z.x,Z.y-Z.height/2);V.bezierCurveTo(Z.x-X/2,Z.y-Z.height/2,Z.x-X/2,Z.y+Z.height/2,Z.x,Z.y+Z.height/2);V.bezierCurveTo(Z.x+X/2,Z.y+Z.height/2,Z.x+X/2,Z.y-Z.height/2,Z.x,Z.y-Z.height/2);V.restore();if(Z._event){P(aa[Y],V,W)}q(V,Z)}}return aa};A.fn.drawLine=function i(X){var ac=this,aa,W,ab=I(new H(),X),V=1,Z=0,Y=0;for(aa=0;aa<ac.length;aa+=1){W=j(ac[aa]);if(W){if(ab.layer&&!ab._layer){s(ac[aa],X,i)}M(W,ab);W.beginPath();while(x){Z=ab["x"+V];Y=ab["y"+V];if(Z!==B&&Y!==B){W.lineTo(Z,Y);V+=1}else{break}}if(ab._event){P(ac[aa],W,X)}q(W,ab)}}return ac};A.fn.drawQuad=function i(ab){var V=this,aa,ae,Z=I(new H(),ab),Y=2,X=0,W=0,ad=0,ac=0;for(aa=0;aa<V.length;aa+=1){ae=j(V[aa]);if(ae){if(Z.layer&&!Z._layer){s(V[aa],ab,i)}M(ae,Z);ae.beginPath();ae.moveTo(Z.x1,Z.y1);while(x){X=Z["x"+Y];W=Z["y"+Y];ad=Z["cx"+(Y-1)];ac=Z["cy"+(Y-1)];if(X!==B&&W!==B&&ad!==B&&ac!==B){ae.quadraticCurveTo(ad,ac,X,W);Y+=1}else{break}}if(Z._event){P(V[aa],ae,ab)}q(ae,Z)}}return V};A.fn.drawBezier=function i(ag){var V=this,af,ah,ac=I(new H(),ag),ab=2,Y=1,aa=0,Z=0,ae=0,X=0,ad=0,W=0;for(af=0;af<V.length;af+=1){ah=j(V[af]);if(ah){if(ac.layer&&!ac._layer){s(V[af],ag,i)}M(ah,ac);ah.beginPath();ah.moveTo(ac.x1,ac.y1);while(x){aa=ac["x"+ab];Z=ac["y"+ab];ae=ac["cx"+Y];X=ac["cy"+Y];ad=ac["cx"+(Y+1)];W=ac["cy"+(Y+1)];if(aa!==B&&Z!==B&&ae!==B&&X!==B&&ad!==B&&W!==B){ah.bezierCurveTo(ae,X,ad,W,aa,Z);ab+=1;Y+=2}else{break}}if(ac._event){P(V[af],ah,ag)}q(ah,ac)}}return V};function K(Z,V,aa){var W,X,Y=/(\d*\.?\d*)\w\w\b/gi;aa.width=V.measureText(aa.text).width;if(n.font===aa.font&&n.text===aa.text){aa.height=n.height}else{W=Z.style.fontSize;X=aa.font.match(Y);if(X){Z.style.fontSize=(aa.font.match(Y)||A.css(Z,"fontSize"))[0]}aa.height=u(A.css(Z,"fontSize"));Z.style.fontSize=W}}A.fn.drawText=function i(X){var aa=this,W,Y,V,Z=I(new H(),X);for(Y=0;Y<aa.length;Y+=1){W=A(aa[Y]);V=j(W[0]);if(V){if(Z.layer&&!Z._layer){s(aa[Y],X,i)}M(V,Z);V.textBaseline=Z.baseline;V.textAlign=Z.align;V.font=Z.font;K(W[0],V,Z);if(!Y){g(V,Z,Z.width,Z.height)}V.strokeText(Z.text,Z.x,Z.y);V.fillText(Z.text,Z.x,Z.y);if(Z._event){V.beginPath();V.rect(Z.x-Z.width/2,Z.y-Z.height/2,Z.width,Z.height);V.restore();P(aa[Y],V,X);V.closePath()}else{V.restore()}}}n=Z;return aa};A.fn.drawImage=function i(ac){var V=this,X,ab,ag,Z=I(new H(),ac),aa,W,ad,af;if(Z.source.src){aa=Z.source}else{if(Z.source){aa=new O();aa.src=Z.source}}function ae(ah,ai){if(!ai){W=aa.width/aa.height;if(Z.width===y&&Z.sWidth===y){ac.width=Z.width=Z.sWidth=aa.width}if(Z.height===y&&Z.sHeight===y){ac.height=Z.height=Z.sHeight=aa.height}if(Z.width===y&&Z.sWidth!==y){Z.width=Z.sWidth}if(Z.height===y&&Z.sHeight!==y){Z.height=Z.sHeight}if(Z.sWidth===y&&Z.width!==y){ac.sWidth=Z.sWidth=aa.width}if(Z.sHeight===y&&Z.height!==y){ac.sHeight=Z.sHeight=aa.height}if(Z.sx===y){if(Z.cropFromCenter){Z.sx=aa.width/2}else{Z.sx=0}}if(Z.sy===y){if(Z.cropFromCenter){Z.sy=aa.height/2}else{Z.sy=0}}if(!Z.cropFromCenter){Z.sx+=Z.sWidth/2;Z.sy+=Z.sHeight/2}if((Z.sx+Z.sWidth/2)>aa.width){Z.sx=aa.width-Z.sWidth/2}if((Z.sx-Z.sWidth/2)<0){Z.sx=Z.sWidth/2}if((Z.sy-Z.sHeight/2)<0){Z.sy=Z.sHeight/2}if((Z.sy+Z.sHeight/2)>aa.height){Z.sy=aa.height-Z.sHeight/2}if(Z.width!==y&&Z.height===y){ac.height=Z.height=Z.width/W}else{if(Z.width===y&&Z.height!==y){ac.width=Z.width=Z.height*W}else{if(Z.width===y&&Z.height===y){ac.width=Z.width=aa.width;ac.height=Z.height=aa.height}}}g(ah,Z,Z.width,Z.height)}ah.drawImage(aa,Z.sx-Z.sWidth/2,Z.sy-Z.sHeight/2,Z.sWidth,Z.sHeight,Z.x-Z.width/2,Z.y-Z.height/2,Z.width,Z.height);if(Z._event){ah.beginPath();ah.rect(Z.x-Z.width/2,Z.y-Z.height/2,Z.width,Z.height);ah.restore();P(V[ai],ah,ac);ah.closePath()}else{ah.restore()}}function Y(ai,aj,ah){return function(){ae(ah,aj);if(Z.load){Z.load.call(ai)}}}for(ab=0;ab<V.length;ab+=1){X=V[ab];ag=j(V[ab]);if(ag){if(Z.layer&&!Z._layer){s(V[ab],ac,i)}M(ag,Z);if(aa){if(aa.complete){Y(X,ab,ag)()}else{aa.onload=Y(X,ab,ag)}}}}return V};A.fn.drawPolygon=function i(aa){var V=this,Z,af,X=I(new H(),aa),ag=d/X.sides,W=(d/2)+ag,ae=(d*2)/X.sides,ad=b(ae/2)*X.radius,ac,ab,Y;X.closed=x;for(Z=0;Z<V.length;Z+=1){af=j(V[Z]);if(af){if(X.layer&&!X._layer){s(V[Z],aa,i)}M(af,X);if(!Z){g(af,X,X.radius,X.radius)}af.beginPath();for(Y=0;Y<X.sides;Y+=1){ac=X.x+Q(X.radius*b(W));ab=X.y+Q(X.radius*p(W));af.lineTo(ac,ab);if(X.projection){ac=X.x+Q((ad+ad*X.projection)*b(W+ag));ab=X.y+Q((ad+ad*X.projection)*p(W+ag));af.lineTo(ac,ab)}W+=ae}af.restore();if(X._event){P(V[Z],af,aa)}q(af,X)}}return V};A.fn.setPixels=function i(ad){var V=this,X,ac,af,Y=I(new H(),ad),W,aa,Z,ab,ae={};for(ac=0;ac<V.length;ac+=1){X=V[ac];af=j(X);if(af){if(Y.layer&&!Y._layer){s(V[ac],ad,i)}if(!ac){g(af,Y,Y.width,Y.height)}if(!Y.x&&!Y.y&&!Y.width&&!Y.height){Y.width=X.width;Y.height=X.height;Y.x=Y.width/2;Y.y=Y.height/2}W=af.getImageData(Y.x-Y.width/2,Y.y-Y.height/2,Y.width,Y.height);aa=W.data;ab=aa.length;ae=[];if(Y.each!==y){for(Z=0;Z<ab;Z+=4){ae.r=aa[Z];ae.g=aa[Z+1];ae.b=aa[Z+2];ae.a=aa[Z+3];Y.each.call(X,ae);aa[Z]=ae.r;aa[Z+1]=ae.g;aa[Z+2]=ae.b;aa[Z+3]=ae.a}}af.putImageData(W,Y.x-Y.width/2,Y.y-Y.height/2);af.restore()}}return V};A.fn.getLayers=function(){var V=this[0],W;if(!V||!V.getContext){W=y}else{W=A.data(V,"jCanvas-layers");if(!W){W=[];A.data(V,"jCanvas-layers",W)}}return W};A.fn.getLayer=function(V){var Y=this.getLayers(),X,W;if(!Y){X=y}else{if(typeof V==="string"){for(W=0;W<Y.length;W+=1){if(Y[W].name===V){V=W;break}}}V=V||0;X=Y[V]}return X};function a(W,V,X){if(X.visible&&X.method){X.method.call(W,X)}}A.fn.drawLayers=function(){var ab=this,W,aa,V,Z,Y,X;for(aa=0;aa<ab.length;aa+=1){W=A(ab[aa]);V=j(W[0]);if(V){Z=W.getLayers();V.clearRect(0,0,W[0].width,W[0].height);for(X=0;X<Z.length;X+=1){Y=Z[X];a(W,V,Y)}}}return ab};function s(X,Z,aa){var V=A(X),Y,W;Z=I(Z,new H(),I({},Z));Y=V.getLayers();if(typeof Z==="function"){Z.method=A.fn.draw}else{Z.method=A.fn[Z.method]||aa;if(Z.method!==A.fn.drawImage){Z.width=Z.width||0;Z.height=Z.height||0}for(W in R.events){if(R.events.hasOwnProperty(W)&&Z[W]){if(!R.events[W].called){R.events[W].call(J,V)}Z._event=x}}}Z.layer=x;Z._layer=x;Y.push(Z);return Z}A.fn.addLayer=function(X){var aa=this,W,Y,V,Z=X||{};for(Y=0;Y<aa.length;Y+=1){W=A(aa[Y]);V=j(aa[Y]);if(V){Z=s(W[0],Z);a(W,V,Z)}}return aa};A.fn.removeLayers=function(){var X=this,W,V;for(V=0;V<X.length;V+=1){W=A(X[V]).getLayers()||[];W.length=0}return X};A.fn.removeLayer=function(V){var aa=this,Z,X=typeof V,Y,W;for(Z=0;Z<aa.length;Z+=1){Y=A(aa[Z]).getLayers()||[];if(X==="string"){for(W=0;W<Y.length;W+=1){if(Y[W].name===V){Y.splice(W,1);break}}}else{if(X==="number"){Y.splice(V,1)}}}return aa};function f(W,X){var V;for(V=0;V<W.length;V+=1){X[W[V]]=X["_"+W[V]]}}function h(W,X){var V;for(V=0;V<W.length;V+=1){X["_"+W[V]]=X[W[V]]}}F=["width","height","opacity"];G=["color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","fillStyle","outlineColor","strokeStyle","shadowColor",];function D(W){var Z,Y,X=[],V=1;if(typeof W==="object"){X=W}else{if(W.match(/^[a-z]+$/gi)){Y=c.documentElement;Z=Y.style.color;Y.style.color=W;W=A.css(Y,"color");Y.style.color=Z}if(W.match(/^#/gi)){if(W.length===4){W=W.replace(/([0-9a-f])/gi,"$1$1")}X=W.match(/[0-9a-f]{2}/gi);X[0]=o(X[0],16);X[1]=o(X[1],16);X[2]=o(X[2],16)}else{if(W.match(/^rgb/gi)){X=W.match(/[0-9]+/gi);if(W.match(/\%/gi)){V=2.55}X[0]=X[0]*V;X[1]=X[1]*V;X[2]=X[2]*V}}}return X}function T(W,V){W.now[V]=Q(W.start[V]+(W.end[V]-W.start[V])*W.pos)}function N(V){if(typeof V.start!=="object"){V.start=D(V.start);V.end=D(V.end)}V.now=[];T(V,0);T(V,1);T(V,2);V.now="rgb("+V.now.join(",")+")";if(V.elem.style){V.elem.style[V.prop]=V.now}else{V.elem[V.prop]=V.now}}function l(V){var W;for(W=0;W<V.length;W+=1){if(!A.fx.step[V[W]]){A.fx.step[V[W]]=N}}}A.fn.animateLayer=function(){var V=this,W,aa,ac,ab=([]).slice.call(arguments,0),Z,ad;if(typeof ab[0]==="object"&&!ab[0].layer){ab.unshift(0)}if(ab[2]===B){ab.splice(2,0,y);ab.splice(3,0,y);ab.splice(4,0,y)}else{if(typeof ab[2]==="function"){ab.splice(2,0,y);ab.splice(3,0,y)}}if(ab[3]===B){ab[3]=y;ab.splice(4,0,y)}else{if(typeof ab[3]==="function"){ab.splice(3,0,y)}}if(ab[4]===B){ab[4]=y}function X(ae,af){return function(){f(F,af);V.drawLayers();if(ab[4]){ab[4].call(V)}ad=false}}function Y(ae,af){return function(){f(F,af);V.drawLayers()}}for(aa=0;aa<V.length;aa+=1){W=A(V[aa]);ac=j(V[aa]);if(ac){if(ab[0].layer){Z=ab[0]}else{Z=W.getLayer(ab[0])}if(Z&&Z.method!==A.fn.draw){h(F,Z);h(F,ab[1]);if(!ad){ad=true;A(Z).animate(ab[1],{duration:ab[2],easing:(A.easing[ab[3]]?ab[3]:y),complete:X(W,Z),step:Y(W,Z)})}}}}return V};A.fn.stopLayer=function(V,W){if(V.layer){A(V).stop(W)}else{V=A(this).getLayer(V);A(V).stop(W)}return this};A.event.fix=function(V){var W;V=k.call(A.event,V);if(V.pageX!==B&&V.offsetX===B){W=A(V.target).offset();if(W){V.offsetX=V.pageX-W.left;V.offsetY=V.pageY-W.top}}return V};l(G);A.support.canvas=(c.createElement("canvas").getContext!==B);R.defaults=C;R.prefs=U;R.extend=m;A.jCanvas=R}(jQuery,window,document,Math,Image,parseFloat,parseInt,true,false,null));